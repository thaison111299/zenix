(this.webpackJsonpzenix=this.webpackJsonpzenix||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},461:function(e,t,n){},462:function(e,t,n){},463:function(e,t,n){"use strict";n.r(t);var c=n(3),s=n(24),a=n.n(s),r=n(15),i=n(59),o=n(7),u={user:null,userList:[],statusList:[],userClick:null};var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;if("SET_USER_CLICK"===t.type){var n=t.userClick;return Object(o.a)(Object(o.a)({},e),{},{userClick:n})}if("SET_USER"===t.type){var c=t.user;return Object(o.a)(Object(o.a)({},e),{},{user:c})}if("SET_USER_LIST"===t.type){var s=t.userList;return Object(o.a)(Object(o.a)({},e),{},{userList:s})}if("SET_STATUS_LIST"===t.type){var a=t.statusList;return Object(o.a)(Object(o.a)({},e),{},{statusList:a})}return e},j=n(5),b=n(35),d=n.n(b),m=n(50),f=(n(160),n(153)),O=(n(161),n(63));n(464),n(465);O.a.initializeApp({apiKey:"AIzaSyBG0T52ZNl-nyWFd9S3ARk6eNyFo0gVnkE",authDomain:"todo-60b13.firebaseapp.com",projectId:"todo-60b13",storageBucket:"todo-60b13.appspot.com",messagingSenderId:"637707986316",appId:"1:637707986316:web:062d b7326b2d39b39c22a9",measurementId:"G-DPZ3N9Z1PG"});var h=O.a.storage(),p=O.a.firestore(),x=O.a.firestore.FieldValue.serverTimestamp;function v(e,t){p.collection(e).doc(t).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))}n(162);var g=n(1);var N=function(e){var t=e.comment,n=e.user;return Object(g.jsx)("div",{className:"comment",children:Object(g.jsxs)("div",{className:"main",children:[Object(g.jsxs)("div",{className:"introduce",children:[Object(g.jsx)("h4",{className:"name",children:t.by.name}),Object(g.jsx)("img",{className:"icon",src:t.by.avatarURL})]}),Object(g.jsxs)("div",{className:"comment-content",children:[Object(g.jsx)("h5",{className:"comment-text",children:t.text}),Object(g.jsxs)("div",{className:"comment-bar",children:[Object(g.jsx)("h5",{children:"like"}),Object(g.jsx)("h5",{children:"reply"}),n.id===t.by.id&&Object(g.jsx)("h5",{onClick:function(){v("commentlist",t.id)},children:"delete"})]})]})]})})};function k(e,t,n){var c=h.ref(t[n]),s=p.collection(e);c.put(t).on("state_changed",(function(e){}),(function(e){}),Object(m.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x(),e.next=3,s.add(Object(o.a)(Object(o.a)({},t),{},{createAt:n}));case 3:case"end":return e.stop()}}),e)}))))}function y(e){var t=Object(c.useState)([]),n=Object(j.a)(t,2),s=n[0],a=n[1];return Object(c.useEffect)((function(){var t=p.collection(e).orderBy("createAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){e.data()&&t.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),a(t)}));return function(){return t()}}),[e]),s}function S(e,t,n,c){p.collection(e).doc(t).update(n,c)}var C=n(34);function w(e){return{type:"SET_USER",user:e}}function E(e){return{type:"SET_USER_LIST",userList:e}}function L(e){return{type:"SET_USER_CLICK",userClick:e}}var U=Object(r.b)((function(e){return e}),(function(e){return{setUserClick:function(t){return e(L(t))}}}))((function(e){var t=e.status,n=e.user,s=e.setUserClick,a=function(e,t){var n=Object(c.useState)([]),s=Object(j.a)(n,2),a=s[0],r=s[1];return Object(c.useEffect)((function(){var n=p.collection(e).orderBy("createAt","asc").onSnapshot((function(e){var n=[];e.forEach((function(e){e.data()&&e.data().of.id===t&&n.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),r(n)}));return function(){return n()}}),[e]),a}("commentlist",t.id),r=Object(c.useState)(""),i=Object(j.a)(r,2),u=i[0],l=i[1],b=Object(c.useState)(!0),d=Object(j.a)(b,2),m=d[0],O=d[1],h=Object(c.useState)(!1),x=Object(j.a)(h,2),y=x[0],w=x[1];return Object(c.useEffect)((function(){for(var e=0;e<t.like.length;e++)if(t.like[e].id===n.id)return void w(!0);console.log("you not liked")}),[]),Object(g.jsxs)("div",{className:"status",children:[Object(g.jsxs)(C.b,{to:"/zenix/information",className:"introduce",onClick:function(){s(t.by)},children:[Object(g.jsx)("img",{alt:"avatar",className:"user-avatar",src:t.by.avatarURL}),Object(g.jsx)("h2",{className:"user-name",children:t.by.name}),t.by.id===n.id&&Object(g.jsx)("button",{onClick:function(){console.log("deleted"),v("statuslist",t.id)},className:"delete",children:"X"})]}),Object(g.jsx)("h3",{className:"status-text",children:t.text}),t.pictureUrl&&Object(g.jsxs)(g.Fragment,{children:["image"===t.fileType&&Object(g.jsx)("img",{className:"status-image",src:t.pictureUrl}),"video"===t.fileType&&Object(g.jsx)("video",{className:"status-video",controls:!0,children:Object(g.jsx)("source",{src:t.pictureUrl,type:"video/mp4"})})]}),Object(g.jsxs)("div",{className:"status-bar",children:[Object(g.jsx)("div",{onClick:function(){if(w(!y),!y){for(var e=0;e<t.like.length;e++)if(t.like[e].id===n.id){var c=t.like.filter((function(e){return e.id!==n.id}));return void S("statuslist",t.id,"like",c)}S("statuslist",t.id,"like",[].concat(Object(f.a)(t.like),[n]))}else{var s=t.like.filter((function(e){return e.id!==n.id}));S("statuslist",t.id,"like",s)}},className:"like-icon "+(y?"liked":"like")}),Object(g.jsx)("h3",{className:"like-count",style:{marginLeft:"10px",fontSize:"24px",color:"blue"},children:t.like.length}),Object(g.jsx)("h4",{onClick:function(){return O(!m)},className:"show-comment",children:m?"hide ".concat(a.length," comment"):"show ".concat(a.length," comment")})]}),m&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("form",{className:"form-upload-comment",onSubmit:function(e){e.preventDefault(),k("commentlist",{text:u,of:t,by:n},"text"),l("")},children:[Object(g.jsx)("img",{className:"user-avatar",src:n.avatarURL}),Object(g.jsx)("input",{type:"text",placeholder:"your comment...",onChange:function(e){return l(e.target.value)},value:u,required:!0})]}),a.map((function(e){return Object(g.jsx)(N,{user:n,comment:e},e.id)}))]})]})})),T=(n(165),n(150));function R(e,t){var n=Object.keys,c=typeof e;return e&&t&&"object"===c&&c===typeof t?n(e).length===n(t).length&&n(e).every((function(n){return R(e[n],t[n])})):e===t}var I={deleteCookie:function(e){document.cookie=e+" = ; expires = Thu, 01-Jan-1970 00:00:01 GMT ;"},getCookieObject:function(e){var t=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),c=0;c<n.length;c++){for(var s=n[c];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}(e);if(t){var n=JSON.parse(t);if(n)return n}return null},uploadCookie:function(e,t){var n=new Date;n.setMonth(n.getMonth()+1),document.cookie="".concat(e," = ")+JSON.stringify(t)+"; expires = "+n.toUTCString()+";"},includesObject:function(e,t){var n,c=Object(T.a)(e);try{for(c.s();!(n=c.n()).done;){if(R(n.value,t))return!0}}catch(s){c.e(s)}finally{c.f()}return!1},equalObject:R};n(166);var _=Object(r.b)((function(e){return e}),(function(e){return{setUserClick:function(t){return e(L(t))}}}))((function(e){var t=e.person,n=e.setUserClick;return Object(g.jsxs)(C.b,{to:"/zenix/information",className:"friend",onClick:function(){n(t)},children:[Object(g.jsx)("img",{className:"icon",src:t.avatarURL}),Object(g.jsx)("h4",{className:"friend-name",children:t.name}),Object(g.jsx)("div",{className:"green-dot"})]})}));n(167);function z(e){var t=e.result,n=t.type,c=t.value;return Object(g.jsxs)("div",{className:"result",children:[Object(g.jsx)("h2",{className:"type",children:t.type}),"user"===n&&Object(g.jsx)("img",{className:"avatar",src:c.avatarURL}),Object(g.jsx)("h3",{className:"value "+("user"===n?"background-white":""),children:"status"===n?t.value.text:t.value.name})]})}n(168);var A=Object(r.b)((function(e){return e}),(function(e){return{setUser:function(t){return e(w(t))},setUserClick:function(t){return e(L(t))}}}))((function(e){var t=e.setUser,n=e.user,s=e.userList,a=e.statusList,r=e.setUserClick,i=Object(c.useState)(!0),o=Object(j.a)(i,2),u=o[0],l=o[1],b=Object(c.useState)(!1),d=Object(j.a)(b,2),m=d[0],f=d[1],O=Object(c.useState)(!1),h=Object(j.a)(O,2),p=h[0],x=h[1],v=Object(c.useState)(""),N=Object(j.a)(v,2),k=N[0],y=N[1],S=Object(c.useState)(["haha","hehe"]),w=Object(j.a)(S,2),E=w[0],L=w[1],U=function(){window.innerWidth<=690?l(!1):l(!0)};function T(){I.deleteCookie("user"),t(null)}return window.addEventListener("resize",U),Object(c.useEffect)((function(){U()}),[]),Object(g.jsxs)("div",{className:"navbar-container",children:[Object(g.jsxs)("div",{className:"navbar",children:[Object(g.jsx)(C.b,{to:"/zenix/",onClick:function(){return r(null)},children:Object(g.jsx)("div",{className:"logo"})}),u&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("form",{className:"form-search",onSubmit:function(e){e.preventDefault(),y("")},children:[Object(g.jsx)("img",{className:"search-icon",src:"https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/search-512.png"}),Object(g.jsx)("input",{onChange:function(e){var t=e.target.value;y(e.target.value),console.log("searching: ".concat(e.target.value)),t&&function(e){for(var t=[],n=0;n<a.length;n++)a[n].text.toLowerCase().includes(e)&&t.push({type:"status",value:a[n]});for(var c=0;c<s.length;c++)s[c].name.toLowerCase().includes(e)&&t.push({type:"user",value:s[c]});L(t)}(t.trim().toLowerCase())},className:"input-search",type:"text",placeholder:"search",value:k}),k&&Object(g.jsx)("div",{className:"result-container",children:E.map((function(e){return Object(g.jsx)(z,{result:e})}))})]}),Object(g.jsxs)(C.b,{className:"navbar-introduce",to:"/zenix/information",onClick:function(){r(n)},children:[Object(g.jsx)("img",{className:"avatar",src:n.avatarURL}),Object(g.jsxs)("div",{className:"introduce-text",children:[Object(g.jsx)("h3",{className:"name",children:n.name}),Object(g.jsx)("h4",{className:"email",children:n.email})]})]}),Object(g.jsx)("button",{onClick:T,className:"button-log",children:"logout"})]}),!u&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"ZENIX"}),Object(g.jsx)("img",{onClick:function(){return f(!m)},className:"extend-icon",src:m?"https://uxwing.com/wp-content/themes/uxwing/download/01-user_interface/close.png":"https://image.flaticon.com/icons/png/512/56/56763.png"})]})]}),m&&!u&&Object(g.jsxs)("ul",{className:"navbar-mobile",children:[Object(g.jsxs)("li",{className:"item navbar-introduce",children:[Object(g.jsx)("img",{className:"avatar",src:"https://i.pinimg.com/originals/51/f6/fb/51f6fb256629fc755b8870c801092942.png"}),Object(g.jsxs)("div",{className:"introduce-text",children:[Object(g.jsx)("h3",{className:"name",children:n.name}),Object(g.jsx)("h4",{className:"email",children:n.email})]})]}),Object(g.jsx)("div",{className:"item-logout",onClick:T,children:Object(g.jsx)("img",{className:"icon-logout",src:"https://www.iconpacks.net/icons/2/free-exit-logout-icon-2857-thumb.png"})}),Object(g.jsx)("div",{onClick:function(){return x(!p)},className:"item",children:Object(g.jsx)("img",{className:"friend-icon",src:"https://img.icons8.com/ios/452/friends.png"})}),p&&s.map((function(e){return Object(g.jsx)(_,{person:e})}))]})]})}));var D=Object(r.b)((function(e){return e}),(function(e){return{setUser:function(t){return e(w(t))},setUserList:function(t){return e(E(t))},setStatusList:function(t){return e(function(e){return{type:"SET_STATUS_LIST",statusList:e}}(t))}}}))((function(e){var t=e.user,n=e.userList,s=e.setStatusList,a=y("statuslist");Object(c.useEffect)((function(){a&&s(a)}),[a]);var r=Object(c.useState)(!0),i=Object(j.a)(r,2),o=i[0],u=i[1],l=Object(c.useState)(""),b=Object(j.a)(l,2),f=b[0],O=b[1],p=Object(c.useState)(null),x=Object(j.a)(p,2),v=x[0],N=x[1],S=Object(c.useState)(""),C=Object(j.a)(S,2),w=C[0],E=C[1],L=Object(c.useState)("image"),T=Object(j.a)(L,2),R=T[0],I=T[1],z=function(){window.innerWidth<=1263?u(!1):u(!0)};function A(){return(A=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),k("statuslist",{text:f,by:t,like:[],pictureUrl:w,fileType:R},"text"),O(""),E(""),N(null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return window.addEventListener("resize",z),Object(c.useEffect)((function(){z()}),[]),Object(c.useEffect)((function(){v?(console.log(v),v.type.includes("image")?I("image"):I("video"),function(e,t){var n=h.ref(e.name);n.put(e).on("state_changed",(function(e){}),(function(e){}),Object(m.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getDownloadURL();case 2:c=e.sent,t(c);case 4:case"end":return e.stop()}}),e)}))))}(v,E)):E("")}),[v]),Object(g.jsx)("div",{className:"app",children:t&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("form",{className:"form-upload-status",onSubmit:function(e){return A.apply(this,arguments)},children:[Object(g.jsx)("input",{value:f,onChange:function(e){return O(e.target.value)},type:"text",required:!0,placeholder:"".concat(t.name,", write something...")}),Object(g.jsxs)("div",{className:"bar",children:[Object(g.jsx)("button",{children:"upload"}),v&&v.name,Object(g.jsx)("label",{for:"file-input",children:Object(g.jsx)("img",{className:"icon",src:"https://img.icons8.com/ios/452/compact-camera.png"})}),Object(g.jsx)("input",{onChange:function(e){N(e.target.files[0])},id:"file-input",className:"file",type:"file"})]}),w&&Object(g.jsx)("img",{src:w,style:{width:"200px",height:"200px"}})]}),Object(g.jsxs)("div",{className:"main-section",children:[o&&Object(g.jsx)("div",{className:"friend-section",children:n.map((function(e){return Object(g.jsx)(_,{person:e})}))}),Object(g.jsx)("div",{className:"status-container",children:a.map((function(e){return Object(g.jsx)(U,{user:t,status:e},e.id)}))})]})]})})})),q=n(8);n(461);var F=Object(r.b)((function(e){return e}))((function(e){var t=e.userClick,n=(e.userList,e.user),s=function(e,t){var n=Object(c.useState)([]),s=Object(j.a)(n,2),a=s[0],r=s[1];return Object(c.useEffect)((function(){var n=p.collection(e).orderBy("createAt","desc").onSnapshot((function(e){var n=[];e.forEach((function(e){e.data()&&e.data().by.id===t&&n.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),r(n)}));return function(){return n()}}),[e]),a}("statuslist",t.id);return Object(c.useEffect)((function(){console.log("mystatus: ",s)}),[s]),Object(g.jsxs)("div",{className:"information",children:[Object(g.jsxs)("div",{className:"banner",children:[Object(g.jsxs)("div",{className:"left",children:[Object(g.jsx)("img",{className:"avatar",src:t.avatarURL}),Object(g.jsx)("h1",{children:t.name})]}),Object(g.jsx)("img",{className:"right",src:"https://i.pinimg.com/originals/d4/bc/c4/d4bcc46e371e194b20854acd1ba3a86b.jpg"})]}),Object(g.jsxs)("div",{className:"status-container",children:[Object(g.jsxs)("h1",{children:[t.name,"'s statuses"]}),s.map((function(e){return Object(g.jsx)(U,{user:n,status:e},e.id)}))]})]})}));n(462);var B=Object(r.b)((function(e){return e}),(function(e){return{setUser:function(t){return e(w(t))},setUserList:function(t){return e(E(t))}}}))((function(e){var t=e.user,n=e.setUser,s=e.setUserList,a=y("userlist");Object(c.useEffect)((function(){s(a)}),[a]);var r=Object(c.useState)(""),i=Object(j.a)(r,2),o=i[0],u=i[1],l=Object(c.useState)(""),b=Object(j.a)(l,2),d=b[0],m=b[1],f=Object(c.useState)(""),O=Object(j.a)(f,2),h=O[0],p=O[1],x=Object(c.useState)(""),v=Object(j.a)(x,2),N=v[0],S=v[1],w=Object(c.useState)(""),E=Object(j.a)(w,2),L=E[0],U=E[1],T=Object(c.useState)(""),R=Object(j.a)(T,2),_=R[0],z=R[1],B=Object(c.useState)(!1),Z=Object(j.a)(B,2),G=Z[0],J=Z[1];return Object(c.useEffect)((function(){n(I.getCookieObject("user")),console.log("props: ",e)}),[]),Object(g.jsx)(C.a,{children:Object(g.jsxs)("div",{className:"app",children:[t&&Object(g.jsx)(A,{}),Object(g.jsxs)(q.c,{children:[Object(g.jsx)(q.a,{path:"/zenix/",exact:!0,component:D}),t&&Object(g.jsx)(q.a,{path:"/zenix/information",exact:!0,component:F}),Object(g.jsx)(q.a,{path:"/",exact:!0,component:D})]}),!G&&!t&&Object(g.jsxs)("form",{form:!0,className:"form-log",onSubmit:function(e){if(e.preventDefault(),a){for(var t=0;t<a.length;t++){var c=a[t],s=c.email,r=c.password;if(s===L&&r===_)return I.uploadCookie("user",a[t]),void n(a[t])}alert("email or password wrong")}},children:[Object(g.jsxs)("div",{className:"zenix-intro",children:[Object(g.jsx)("div",{className:"white-logo"}),Object(g.jsx)("h1",{children:"ZENIX"})]}),Object(g.jsx)("h1",{children:"LOGIN"}),Object(g.jsx)("input",{onChange:function(e){return U(e.target.value)},required:!0,className:"input-log",placeholder:"email",type:"text"}),Object(g.jsx)("input",{onChange:function(e){return z(e.target.value)},required:!0,className:"input-log",placeholder:"password",type:"password"}),Object(g.jsx)("button",{className:"button-log",children:"login"}),Object(g.jsx)("button",{onClick:function(){return J(!0)},className:"button-log",children:"register"})]}),G&&!t&&Object(g.jsxs)("form",{className:"form-log",onSubmit:function(e){e.preventDefault();var t={name:o,avatarURL:h||"https://i.pinimg.com/originals/51/f6/fb/51f6fb256629fc755b8870c801092942.png",email:d,password:N};if(a){for(var n=0;n<a.length;n++){if(a[n].email===d)return void alert("email existed")}k("userlist",t,"name"),alert("create success")}},children:[Object(g.jsxs)("div",{className:"zenix-intro",children:[Object(g.jsx)("div",{className:"white-logo"}),Object(g.jsx)("h1",{children:"ZENIX"})]}),Object(g.jsx)("h1",{children:"CREATE NEW"}),Object(g.jsx)("input",{required:!0,onChange:function(e){return u(e.target.value)},className:"input-log",placeholder:"name",type:"text"}),Object(g.jsx)("input",{onChange:function(e){return p(e.target.value)},className:"input-log",placeholder:"avatar url",type:"text"}),Object(g.jsx)("input",{required:!0,onChange:function(e){return m(e.target.value)},className:"input-log",placeholder:"email",type:"text"}),Object(g.jsx)("input",{required:!0,onChange:function(e){return S(e.target.value)},className:"input-log",placeholder:"password",type:"password"}),Object(g.jsx)("button",{className:"button-log",children:"create"}),Object(g.jsx)("button",{onClick:function(){return J(!1)},className:"button-log",children:"back to login"})]})]})})})),Z=Object(i.b)(l);a.a.render(Object(g.jsx)(r.a,{store:Z,children:Object(g.jsx)(B,{})}),document.getElementById("root"))}},[[463,1,2]]]);
//# sourceMappingURL=main.8247a677.chunk.js.map